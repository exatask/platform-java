plugins {
  id "groovy-gradle-plugin"
}

ext {
  accountId = System.env.AWS_ACCOUNT_ID ?: "571908293071"
  domain = System.env.AWS_DOMAIN ?: "exatask"
}

dependencies {
  implementation group: "io.spring.gradle", name: "dependency-management-plugin", version: "${springDependencyMgmtVersion}"
  implementation group: "com.exatask", name: "gradle-buildSrc", version: "${exataskBuildSrcVersion}"
}

repositories {

  mavenLocal()
  mavenCentral()

  maven {

    url "https://${domain}-${accountId}.d.codeartifact.ap-south-1.amazonaws.com/maven/exatask-java/"
    name "AWS_CODE_ARTIFACT"
    credentials(PasswordCredentials) {
      username = "aws"
      password = System.env.AWS_CODE_ARTIFACT_TOKEN
    }
  }
}